# Setting Up Vercel Environment Variables

## Quick Reference

Add these environment variables to your Vercel project to enable the demo:

### Required Variables

| Variable Name | Description | Where to Get It |
|--------------|-------------|-----------------|
| `OPENAI_API_KEY` | For Whisper transcription | https://platform.openai.com/api-keys |
| `ANTHROPIC_API_KEY` | For Claude analysis | https://console.anthropic.com/settings/keys |
| `BLOB_READ_WRITE_TOKEN` | For file storage | Auto-generated by Vercel |

---

## Method 1: Vercel Dashboard (Easiest)

### Step 1: Go to Your Project Settings
1. Visit: https://vercel.com/dashboard
2. Click on your project: **resonance**
3. Click **Settings** tab
4. Click **Environment Variables** in the left sidebar

### Step 2: Add OPENAI_API_KEY
1. In the "Key" field, enter: `OPENAI_API_KEY`
2. In the "Value" field, paste your OpenAI API key (starts with `sk-proj-`)
3. Select environments: ‚úÖ Production ‚úÖ Preview ‚úÖ Development
4. Click **Save**

### Step 3: Add ANTHROPIC_API_KEY
1. In the "Key" field, enter: `ANTHROPIC_API_KEY`
2. In the "Value" field, paste your Anthropic API key (starts with `sk-ant-`)
3. Select environments: ‚úÖ Production ‚úÖ Preview ‚úÖ Development
4. Click **Save**

### Step 4: Enable Blob Storage (Auto-generates BLOB_READ_WRITE_TOKEN)
1. In the left sidebar, click **Storage**
2. Click **Create Database**
3. Select **Blob**
4. Click **Continue**
5. Accept defaults and click **Create**
6. The `BLOB_READ_WRITE_TOKEN` is automatically added to your environment variables

---

## Method 2: Vercel CLI

### Add Variables via Command Line
```bash
# Login to Vercel
vercel login

# Link to your project
vercel link

# Add OpenAI key (you'll be prompted to paste the value)
vercel env add OPENAI_API_KEY production
vercel env add OPENAI_API_KEY preview
vercel env add OPENAI_API_KEY development

# Add Anthropic key
vercel env add ANTHROPIC_API_KEY production
vercel env add ANTHROPIC_API_KEY preview
vercel env add ANTHROPIC_API_KEY development

# Blob token is auto-created when you deploy
```

### Pull Variables for Local Development
```bash
# This downloads all environment variables to .env.local
vercel env pull .env.local
```

---

## Method 3: Bulk Import (Fastest)

### Step 1: Prepare Your Keys
Copy this template and fill in your actual keys:

```
OPENAI_API_KEY=sk-proj-YOUR_KEY_HERE
ANTHROPIC_API_KEY=sk-ant-YOUR_KEY_HERE
```

### Step 2: Import via Dashboard
1. Go to: https://vercel.com/dashboard ‚Üí Your Project ‚Üí Settings ‚Üí Environment Variables
2. Click **Add New** ‚Üí **Add Multiple**
3. Paste your filled template
4. Select environments: Production, Preview, Development
5. Click **Save**

---

## Verification

### Check if Variables are Set
```bash
# List all environment variables
vercel env ls

# Should show:
# OPENAI_API_KEY (Production, Preview, Development)
# ANTHROPIC_API_KEY (Production, Preview, Development)
# BLOB_READ_WRITE_TOKEN (Auto-generated)
```

### Test Variables in Deployment
After adding variables, redeploy:
```bash
vercel --prod
```

Then test the health endpoint:
```bash
curl https://your-project.vercel.app/api/health
```

Should return:
```json
{
  "status": "ok",
  "timestamp": "2025-01-09T...",
  "env": {
    "openai": true,
    "anthropic": true,
    "blob": true
  }
}
```

---

## Security Notes

‚úÖ **DO:**
- Use Vercel environment variables (server-side only)
- Enable all environments (Production, Preview, Development)
- Keep keys in `.env.local` for local dev
- Add `.env.local` to `.gitignore` ‚úÖ (already done)

‚ùå **DON'T:**
- Never commit API keys to git
- Never expose keys in client-side code
- Never share `.env.local` file

---

## Troubleshooting

### "Environment variable not found"
- Wait 30 seconds after adding variables
- Redeploy: `vercel --prod`
- Check spelling of variable names (case-sensitive)

### "Invalid API key"
- Verify key format:
  - OpenAI: `sk-proj-...` (new format) or `sk-...` (old format)
  - Anthropic: `sk-ant-api03-...`
- Check if key is active in respective dashboard
- Ensure no extra spaces when pasting

### "Blob upload failed"
- Go to Settings ‚Üí Storage ‚Üí Blob
- Verify Blob storage is enabled
- Check if `BLOB_READ_WRITE_TOKEN` exists in env vars
- Redeploy to regenerate token

---

## Next Steps

Once environment variables are set:

1. ‚úÖ Redeploy: `vercel --prod`
2. ‚úÖ Test: Open `https://your-project.vercel.app/pages/voice.html`
3. ‚úÖ Record a voice message
4. ‚úÖ Verify transcription and analysis work

Done! üéâ
